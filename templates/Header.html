{% load static %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% block extra_css %}{% endblock %}
<!-- Navigation Bar -->
<nav class="navbar">
    <div class="navbar-content">
        <!-- Left Section -->
        <div class="navbar-left">
            <!-- Apple Logo -->
            <div class="apple-logo">
                <a href="{% url 'home' %}">
                    <svg width="18" height="18" viewBox="0 0 48 48">
                        <path d="M38.71 20.07C37.35 18.24 35.28 17 33 17c-2.76 0-3.93 1.32-5.87 1.32-2 0-3.53-1.32-5.96-1.32-2.84 0-5.53 1.74-7.36 4.47-2.55 3.81-2.11 10.99 2.02 16.76 1.67 2.33 3.91 4.95 6.8 4.98 2.49.02 3.22-1.6 6.02-1.62 2.8-.01 3.46 1.64 5.95 1.61 2.89-.03 5.27-2.93 6.94-5.26 1.19-1.66 1.63-2.5 2.55-4.41-6.7-2.57-7.79-12.18-3.38-15.46zM31 14.5c1.34-1.59 2.24-3.79 1.99-6-.01-.11-.02-.22-.03-.33-1.93.08-4.25 1.29-5.64 2.93-1.32 1.55-2.47 4.02-2.04 6.39 2.31.17 4.67-1.17 5.72-2.99z" />
                    </svg>
                </a>
            </div>

            <!-- Nav Links -->
            <div class="nav-links">
                <a href="{% url 'home'  %}" class="nav-link">Store</a>
                <a href="{% url 'filter_products' 1 %}" class="nav-link">iPhone</a>
                <a href="{% url 'filter_products' 2 %}" class="nav-link">Mac</a>
                <a href="{% url 'filter_products' 3 %}" class="nav-link">iPad</a>
                <a href="{% url 'filter_products' 4 %}" class="nav-link">Watch</a>
                <a href="{% url 'filter_products' 5 %}" class="nav-link">AirPods</a>
                <a href="{% url 'filter_products' 6 %}" class="nav-link">TV & Home</a>
                <a href="{% url 'filter_products' 7 %}" class="nav-link">Entertainment</a>
            </div>
        </div>

        <!-- Right Section -->
        <div class="navbar-right">
            <button class="icon-button" id="search-button">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="11" cy="11" r="8" stroke-width="2" />
                    <path d="m21 21-4.35-4.35" stroke-width="2" />
                </svg>
            </button>

            <a href="{% url 'cart' %}" class="icon-button" id="cart-button">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z" stroke-width="2" />
                    <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" />
                    <path d="M16 10a4 4 0 0 1-8 0" stroke-width="2" />
                </svg>
            </a>
                {% if request.session.username %}
                    <div class="apple-profile-wrapper">

                        <button class="apple-profile-btn">
                            <span class="apple-avatar">
                                {{ request.session.username|first|upper }}
                            </span>
                        </button>

                        <div class="apple-profile-dropdown">

                            <!-- Profile Header -->
                            <div class="apple-profile-header">
                                <div class="apple-avatar large">
                                    {{ request.session.username|first|upper }}
                                </div>
                                <div class="apple-profile-info">
                                    <span class="apple-profile-name">
                                        {{ request.session.username }}
                                    </span>
                                    <span class="apple-profile-email">
                                        {{ request.session.email }}
                                    </span>
                                </div>
                            </div>

                            <hr class="apple-divider">

                            <!-- Actions -->
                            <a href="#" class="apple-action-btn">
                                ‚úèÔ∏è Edit Profile
                            </a>

                            <a href="#" class="apple-action-btn">
                                üì¶ My Orders
                            </a>

                            <hr class="apple-divider">

                            <a href="{% url 'logout' %}" class="apple-logout-btn">
                                Log out
                            </a>

                        </div>

                    </div>
                    {% else %}
                    <a href="{% url 'login' %}" class="icon-button apple-profile">
                        <svg viewBox="0 0 24 24">
                            <circle cx="12" cy="8" r="3.2"></circle>
                            <path d="M5 20c0-3.8 3.5-6 7-6s7 2.2 7 6"></path>
                        </svg>
                    </a>
                {% endif %}

            </div>
        
    </div>
</nav>
<script>
    document.getElementById("cart-button").addEventListener("click", function () {
        window.location.href = "{% url 'cart' %}";
    });
</script>